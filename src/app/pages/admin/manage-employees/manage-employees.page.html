<ion-content class="view-employee-details">
  <ion-header>
    <ion-toolbar>
      <ion-title>
        <ion-icon name="people"></ion-icon> Gerenciar employees
      </ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-grid class="container">
    <!-- üîπ Se√ß√£o Superior (Busca e Bot√£o) -->
    <ion-row class="top-section">
      <!-- üîπ Campo de Busca -->
      <ion-col size-md="6" size-xs="12">
        <ion-searchbar class="search-bar" placeholder="Digite CPF, nome ou e-mail" [(ngModel)]="searchTerm"
          (ionInput)="filteremployees()"></ion-searchbar>
      </ion-col>

      <!-- üîπ Bot√£o de Adicionar employee -->
      <ion-col size-md="6" size-xs="12" class="button-col">
        <ion-button class="add-button" color="primary" (click)="createNewemployee()">
          <ion-icon name="person-add"></ion-icon> Novo employee
        </ion-button>
      </ion-col>
    </ion-row>

    <!-- üîπ Spinner de Carregamento -->
    <ion-row *ngIf="isLoading">
      <ion-col size="12" class="text-center">
        <ion-spinner name="crescent"></ion-spinner>
        <p class="loading-text">Carregando informa√ß√µes...</p>
      </ion-col>
    </ion-row>

    <!-- üîπ Conte√∫do Principal -->
    <ion-row class="content-section" *ngIf="!isLoading">
      <!-- üîπ Lista de employees -->
      <ion-col size-md="8" size-xs="12">
        <ion-list *ngIf="filteredemployees.length > 0; else emptyList">
          <ion-card *ngFor="let employee of filteredemployees" class="employee-card">
            <ion-card-content>
              <ion-item>
                <ion-icon name="person-circle-outline" slot="start" class="icon-large"></ion-icon>
                <ion-label>
                  <h2 class="employee-name">{{ employee.first_name }} {{ employee.last_name }}</h2>
                </ion-label>
              </ion-item>
              <ion-item>
                <ion-icon name="id-card-outline" slot="start" class="icon-small"></ion-icon>
                <ion-label class="employee-info">CPF: {{ employee.cpf }}</ion-label>
              </ion-item>
              <ion-item>
                <ion-icon name="mail-outline" slot="start" class="icon-small"></ion-icon>
                <ion-label class="employee-info">Email: {{ employee.email }}</ion-label>
              </ion-item>
              <ion-row class="action-buttons">
                <ion-button fill="outline" color="primary" (click)="viewDetails(employee)">
                  <ion-icon name="eye"></ion-icon> Detalhes
                </ion-button>
                <ion-button fill="outline" color="warning" (click)="editemployee(employee)">
                  <ion-icon name="create"></ion-icon> Editar
                </ion-button>
                <ion-button fill="outline" color="danger" (click)="deleteemployee(employee.id)">
                  <ion-icon name="trash"></ion-icon> Excluir
                </ion-button>
                <!-- üîπ Novo bot√£o para visualizar a comiss√£o -->
                <ion-button fill="outline" color="success" (click)="viewComissao(employee)">
                  <ion-icon name="cash-outline"></ion-icon> Comiss√£o
                </ion-button>
              </ion-row>
            </ion-card-content>
          </ion-card>
        </ion-list>
      </ion-col>

      <!-- üîπ Se√ß√£o de Desempenho -->
      <ion-col size-md="4" size-xs="12">
        <ion-card class="desempenho-card">
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="bar-chart"></ion-icon> Desempenho Total
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-item>
              <ion-label><strong>Total de clients:</strong> {{ desempenhoTotal.totalclients }}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label><strong>Total de Ades√µes:</strong> {{ desempenhoTotal.totalAdesoes }}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label><strong>Ades√µes Pendentes:</strong> {{ desempenhoTotal.totalPendentes }}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label><strong>Ades√µes Aprovadas:</strong> {{ desempenhoTotal.totalAprovadas }}</ion-label>
            </ion-item>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <!-- üîπ Mensagem de Lista Vazia -->
    <ng-template #emptyList>
      <ion-row>
        <ion-col size="12" class="text-center">
          <ion-text color="medium">
            <p class="empty-message">
              <ion-icon name="alert-circle"></ion-icon> Nenhum employee encontrado.
            </p>
          </ion-text>
        </ion-col>
      </ion-row>
    </ng-template>
  </ion-grid>
</ion-content>