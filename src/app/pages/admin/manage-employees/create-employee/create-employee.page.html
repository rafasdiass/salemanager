<ion-content class="create-employee-page">
  <div class="container">
    <h1 class="text-center">
      <i class="bi bi-person-plus-fill"></i>
      {{ employee ? 'Editar employee' : 'Cadastrar employee' }}
    </h1>

    <!-- Formulário reativo para criar/editar employee -->
    <form [formGroup]="employeeForm" (ngSubmit)="submitForm()">
      <div class="row">
        <!-- CPF -->
        <div class="col-md-6 form-group">
          <label for="cpf">
            <i class="bi bi-credit-card-2-front"></i> CPF
          </label>
          <input id="cpf" type="text" formControlName="cpf" class="form-control" placeholder="Digite o CPF"
            [attr.disabled]="employee ? true : null" />
          <div *ngIf="employeeForm.get('cpf')?.invalid && employeeForm.get('cpf')?.touched" class="text-danger">
            CPF inválido. Insira 11 dígitos numéricos.
          </div>
        </div>

        <!-- Email -->
        <div class="col-md-6 form-group">
          <label for="email">
            <i class="bi bi-envelope"></i> Email
          </label>
          <input id="email" type="email" formControlName="email" class="form-control" placeholder="Digite o email" />
          <div *ngIf="employeeForm.get('email')?.invalid && employeeForm.get('email')?.touched" class="text-danger">
            Email inválido.
          </div>
        </div>

        <!-- Nome -->
        <div class="col-md-6 form-group">
          <label for="first_name">
            <i class="bi bi-person-fill"></i> Nome
          </label>
          <input id="first_name" type="text" formControlName="first_name" class="form-control"
            placeholder="Digite o nome" />
          <div *ngIf="employeeForm.get('first_name')?.invalid && employeeForm.get('first_name')?.touched"
            class="text-danger">
            Nome é obrigatório.
          </div>
        </div>

        <!-- Sobrenome -->
        <div class="col-md-6 form-group">
          <label for="last_name">
            <i class="bi bi-person-lines-fill"></i> Sobrenome
          </label>
          <input id="last_name" type="text" formControlName="last_name" class="form-control"
            placeholder="Digite o sobrenome" />
          <div *ngIf="employeeForm.get('last_name')?.invalid && employeeForm.get('last_name')?.touched"
            class="text-danger">
            Sobrenome é obrigatório.
          </div>
        </div>

        <!-- Telefone -->
        <div class="col-md-6 form-group">
          <label for="phone">
            <i class="bi bi-telephone-fill"></i> Telefone
          </label>
          <input id="phone" type="text" formControlName="phone" class="form-control" placeholder="Digite o telefone" />
          <div *ngIf="employeeForm.get('phone')?.invalid && employeeForm.get('phone')?.touched" class="text-danger">
            Telefone é obrigatório.
          </div>
        </div>
      </div>

      <!-- Endereço -->
      <fieldset formGroupName="address" class="mt-3">
        <legend>
          <i class="bi bi-house-door"></i> Endereço
        </legend>
        <div class="row">
          <div class="col-md-6 form-group">
            <label for="street">
              <i class="bi bi-map"></i> Rua
            </label>
            <input id="street" type="text" formControlName="street" class="form-control" placeholder="Digite a rua" />
            <div *ngIf="employeeForm.get('address.street')?.invalid && employeeForm.get('address.street')?.touched"
              class="text-danger">
              Rua é obrigatória.
            </div>
          </div>

          <div class="col-md-2 form-group">
            <label for="number">
              <i class="bi bi-hash"></i> Número
            </label>
            <input id="number" type="text" formControlName="number" class="form-control" placeholder="Nº" />
            <div *ngIf="employeeForm.get('address.number')?.invalid && employeeForm.get('address.number')?.touched"
              class="text-danger">
              Número é obrigatório.
            </div>
          </div>

          <div class="col-md-4 form-group">
            <label for="neighborhood">
              <i class="bi bi-geo-alt-fill"></i> Bairro
            </label>
            <input id="neighborhood" type="text" formControlName="neighborhood" class="form-control"
              placeholder="Digite o bairro" />
            <div
              *ngIf="employeeForm.get('address.neighborhood')?.invalid && employeeForm.get('address.neighborhood')?.touched"
              class="text-danger">
              Bairro é obrigatório.
            </div>
          </div>
        </div>
      </fieldset>

      <!-- Botões -->
      <div class="actions mt-4">
        <button type="submit" class="btn btn-success me-2" [disabled]="isSubmitting" title="Salvar employee">
          <i class="bi bi-check-circle" aria-hidden="true"></i>
          {{ employee ? 'Atualizar' : 'Salvar' }}
        </button>

        <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="isSubmitting"
          title="Cancelar Cadastro">
          <i class="bi bi-x-circle" aria-hidden="true"></i>
          Cancelar
        </button>
      </div>
    </form>
  </div>
</ion-content>