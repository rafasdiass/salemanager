<div class="establishment-form-container">
    <div class="header-bar">
        <h2>
            <i class="bi bi-building"></i>
            {{ isEditMode ? 'Editar Estabelecimento' : 'Novo Estabelecimento' }}
        </h2>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()">
        <div class="form-section">
            <label>Nome <span>*</span>
                <input formControlName="name" type="text" placeholder="Nome do estabelecimento" />
            </label>
            <label>CNPJ
                <input formControlName="cnpj" type="text" placeholder="CNPJ" />
            </label>
            <label>Email
                <input formControlName="email" type="email" placeholder="Email" />
            </label>
            <label>Telefone
                <input formControlName="phone" type="text" placeholder="Telefone" />
            </label>
        </div>

        <fieldset class="address-section" [formGroupName]="'address'">
            <legend>Endereço</legend>
            <div class="address-fields">
                <label>Rua <span>*</span>
                    <input formControlName="street" type="text" />
                </label>
                <label>Número <span>*</span>
                    <input formControlName="number" type="text" />
                </label>
                <label>Bairro <span>*</span>
                    <input formControlName="neighborhood" type="text" />
                </label>
                <label>Cidade <span>*</span>
                    <input formControlName="city" type="text" />
                </label>
                <label>Estado <span>*</span>
                    <input formControlName="state" type="text" />
                </label>
                <label>CEP <span>*</span>
                    <input formControlName="postal_code" type="text" />
                </label>
                <label>País <span>*</span>
                    <input formControlName="country" type="text" />
                </label>
            </div>
        </fieldset>

        <div class="form-section">
            <label>Plano de Assinatura <span>*</span>
                <select formControlName="subscriptionPlanId">
                    <option value="Free">Free</option>
                    <option value="Unlimited">Unlimited</option>
                </select>
            </label>
        </div>

        <div class="form-actions">
            <button type="submit" [disabled]="form.invalid">
                {{ isEditMode ? 'Salvar Alterações' : 'Criar Estabelecimento' }}
            </button>
            <!-- Remova o erro de "private router" mudando o acesso no TS para public -->
            <button type="button" class="cancel-btn" (click)="onCancel()">
                Cancelar
            </button>
        </div>

        <div *ngIf="successMessage()" class="success-message">
            <i class="bi bi-check-circle"></i> {{ successMessage() }}
        </div>
        <div *ngIf="errorMessage()" class="error-message">
            <i class="bi bi-exclamation-triangle"></i> {{ errorMessage() }}
        </div>
    </form>
</div>
  