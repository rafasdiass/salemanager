<ion-content class="dashboard dark-theme" fullscreen>
  <div class="container">

    <!-- Informações da empresa -->
    <ion-card class="info-card" *ngIf="company()">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="storefront-outline"></ion-icon>
          {{ company()?.name }}
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        Endereço: {{ company()?.address?.street ?? 'N/A' }}
      </ion-card-content>
    </ion-card>

    <!-- Formulário de novo agendamento -->
    <ion-card class="appointment-form-card">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="add-circle-outline"></ion-icon>
          Novo Agendamento
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>

        <!-- Data -->
        <ion-item>
          <ion-label position="stacked">Data</ion-label>
          <ion-datetime presentation="date" [(ngModel)]="selectedDate" placeholder="Selecione uma data"></ion-datetime>
        </ion-item>

        <!-- Hora -->
        <ion-item>
          <ion-label position="stacked">Hora</ion-label>
          <ion-datetime presentation="time" [(ngModel)]="selectedTime"
            placeholder="Selecione um horário"></ion-datetime>
        </ion-item>

        <!-- Profissional -->
        <ion-item>
          <ion-label position="stacked">Profissional</ion-label>
          <ion-select [(ngModel)]="selectedProfessionalId" interface="popover" placeholder="Selecione">
            <ion-select-option *ngFor="let prof of professionals" [value]="prof.id">
              {{ prof.name }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Serviço -->
        <ion-item>
          <ion-label position="stacked">Serviço</ion-label>
          <ion-select [(ngModel)]="selectedServiceId" interface="popover" placeholder="Selecione">
            <ion-select-option *ngFor="let item of getServiceMapAsArray()" [value]="item[0]">
              {{ item[1] }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Botão de confirmar -->
        <ion-button expand="block" (click)="createAppointment()" class="confirm-button">
          <ion-icon name="checkmark-circle-outline"></ion-icon>
          Confirmar Agendamento
        </ion-button>

      </ion-card-content>
    </ion-card>

    <!-- Lista de agendamentos futuros -->
    <ion-card class="list-card" *ngIf="upcomingAppointments().length > 0">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="calendar-outline"></ion-icon>
          Próximos Agendamentos
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let appt of upcomingAppointments()">
            <ion-label>
              {{ appt.startTime | date: 'dd/MM/yyyy HH:mm' }}<br />
              Serviço: {{ getServiceName(appt.serviceId) }}
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Histórico de agendamentos -->
    <ion-card class="list-card" *ngIf="pastAppointments().length > 0">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="time-outline"></ion-icon>
          Histórico de Agendamentos
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let appt of pastAppointments()">
            <ion-label>
              {{ appt.endTime | date: 'dd/MM/yyyy HH:mm' }}<br />
              Serviço: {{ getServiceName(appt.serviceId) }}
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

  </div>
</ion-content>