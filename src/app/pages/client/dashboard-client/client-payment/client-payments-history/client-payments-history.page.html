<div class="container">
  <h2><i class="bi bi-clock-history"></i> Histórico de Pagamentos</h2>

  <!-- Loader -->
  <div *ngIf="isLoading" class="loading">
    <i class="bi bi-arrow-repeat spinner"></i> Carregando...
  </div>

  <!-- Mensagem de erro -->
  <div *ngIf="errorMessage" class="error-message">
    <i class="bi bi-exclamation-circle"></i> {{ errorMessage }}
  </div>

  <!-- Mensagem de sucesso -->
  <div *ngIf="successMessage" class="success-message">
    <i class="bi bi-check-circle"></i> {{ successMessage }}
  </div>

  <!-- Lista de pagamentos -->
  <div *ngIf="!isLoading && pagamentos.length > 0">
    <ul class="list-group">
      <li *ngFor="let pagamento of pagamentos"
        class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ pagamento.client.first_name }} {{ pagamento.client.last_name }}</strong> -
          {{ pagamento.valor | currency }} -
          <span class="badge" [ngClass]="{
            'bg-warning': pagamento.status === 'pendente',
            'bg-danger': pagamento.status === 'atrasado',
            'bg-success': pagamento.status === 'realizado'
          }">
            {{ pagamento.status | titlecase }}
          </span>
        </div>
        <div>
          <span>Vencimento: {{ formatarData(pagamento.vencimento) }}</span>
          <button *ngIf="pagamento.status === 'pendente' || pagamento.status === 'atrasado'"
            (click)="atualizarVencimento(pagamento, '2024-12-31')" class="btn btn-sm btn-primary ms-2">
            <i class="bi bi-calendar-plus"></i> Atualizar Vencimento
          </button>
        </div>
      </li>
    </ul>
  </div>

  <!-- Caso não haja pagamentos -->
  <div *ngIf="!isLoading && pagamentos.length === 0" class="no-data">
    <i class="bi bi-info-circle"></i> Nenhum pagamento encontrado.
  </div>
</div>